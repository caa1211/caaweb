<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <!--common js-->
    <script src="jquery-1.3.2.min.js" type="text/javascript"></script>

    <script type="text/javascript">

        $(function()
        {
            function focusFunction(e){
             
                var targetBtn = $(this);
                var position = $(this).position();
                var targetID =targetBtn.attr('id');
                var menuTargetID = $('#testMenu').attr('targetID');
             //   if(menuTargetID=='none')
               // alert(menuTargetID);
               
                $('#testMenu').slideUp(100, function(){
                    if( menuTargetID=='none') alert('df');
                    if (menuTargetID == undefined || menuTargetID=='none' || menuTargetID != targetID) {
                        
                        $('#testMenu').css('left', position.left).css('top+10', position.top);
                        $('#testMenu').slideDown(100, function(){
                            $('#testMenu').focus();
                            
                            $('#testMenu').attr('targetID', targetID);
                        });
                    }
                    else {
                        $('#testMenu').attr('targetID', 'none');
                       // alert('');
                    }
                      
                      
                });
            }
            
            $('.menu').focus(
            focusFunction
            );
            
           //  $('#testMenu').focus(function(){alert('');})
           $('#testMenu').blur(function(e){
                //debugger;
                //$('.menu:attr['targetID']').unbind('focus',focusFunction);
                $('#testMenu').slideUp(100, function(){
                    
                        $('#testMenu').attr('targetID', 'none');
                });
               //$('.menu').bind('focus',focusFunction);
            });



        });
  
    </script> 

</head>
<body>

<button id='btn1' class='menu'>button 1</button>

<button id='btn2'class='menu'>button 2</button>

<div id='testMenu' style='width:100px; height:100px; display:none; position:absolute; border: solid 1px red;'><button id = 'showBtn'>show id</button> </div>

</body>
</html>
