<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link href="css/tabs.css" rel="stylesheet" type="text/css" />

  <script src="../../../js/jquery-1.3.2.min.js" type="text/javascript"></script>
  <script src="../../../js/jquery.getParams.js" type="text/javascript"></script> 
  
  <script src="jquery.tools.min_tab.js" type="text/javascript"></script>


  <script type="text/javascript">
  var naviApi;
  var $contentPanel;
  var naviViewPath = "naviView.json"
  
  $(function(){
    
    var tabIndex = -1;
    
      function loadData(){
          
          $contentPanel = $('.pane');
          var allPath = naviViewPath;
          var $tabContainer = $('.tabs');
          var $title = $('.unit_title');
          
          $.getJSON(naviViewPath, function(data){
              var indexCounter = 0;
              var defaultIndex = 0;
              $.each(data, function(i, item){
                  if (i == "title") {
                 $title.html(item) 
                      return true;
                  }
                  
                  var menuItemA = $('<a class><span>' + i + '</span></a>');
                  
                  menuItemA.attr('id', 't'+indexCounter );
                  menuItemA.attr('href', item.url);
                  var tabItemLi = $('<li></li>');
                  tabItemLi.attr('url', item.url);
                  tabItemLi.attr('tabId', i);
                  tabItemLi.attr('tabIndex', indexCounter);
              
                  //set default
                  if (item.defaultPage != undefined) {
                      defaultIndex = indexCounter;
                  }
                  indexCounter++;
                  tabItemLi.append(menuItemA);
                  $tabContainer.append(tabItemLi);
              });

              doTab(defaultIndex);
          });
      }       
      
      
   var urlIndex=-1;
    if ($.getURLParam("index") != null) {
      urlIndex = $.getURLParam("index");
  }   
  //do tab
  loadData();
      
  function doTab(index){
      if (urlIndex != -1) 
          index = parseInt(urlIndex);
   
      naviApi = $("ul.tabs").tabs("div.panes > div", {
          effect: 'ajax',
          initialIndex: index,
          api: true,
          onClick: function(){
     $('#naviPrev').removeClass('disable');
      $('#naviNext').removeClass('disable');
              
if(naviApi.getIndex()+1==naviApi.getTabs().length)
$('#naviNext').addClass('disable');
 
 //alert(naviApi.getIndex()==0)
 if (naviApi.getIndex() == 0) {
     $('#naviPrev').addClass('disable');

 }
         
         
          },
          onBeforeClick: function(){
             
          }
      });
  }


$('#naviPrev').click(function(){
       naviApi.prev();
});

$('#naviNext').click(function(){
    naviApi.next();
});

  });
        
        
    </script>
  
</head>
<body background="../../images/center_bg.gif" style="background-attachment: fixed;">
<button id='naviPrev' class='naviPrev'>prev</button>
<button id='naviNext' class='naviNext'>next</button>

<div class='unit_title'></div>
<div  style='border: solid 1px red;'>
<ul class="tabs" style='display:none;'></ul>

<!-- tab "panes" -->
<div class="panes">
 <div class="pane" id='contentPanel' style="display:block; "></div> 
</div>

</div>
</body>

</html>






