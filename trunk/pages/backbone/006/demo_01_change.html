<!DOCTYPE html>
<html>
<head>
    <title>Backbone.js example</title>
    <link href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css" media="screen" rel="stylesheet" type="text/css" />
</head>

    <script src="jquery-1.7.2.min.js"></script>
    <script src="underscore-1.3.1.js"></script>
    <script src="backbone.js"></script>
    
    <script>
    $(function(){

//model
World = Backbone.Model.extend({
    name: null,
    initialize: function(){
        this.bind("change:name",function(){
                var name = this.get("name");
                alert("Change name ：" + name);
        });
    },
    validate:function(attributes){
            if(attributes.name == '') {
                return "name不能为空！";
            }
    }
});

//collections
Worlds = Backbone.Collection.extend({
    initialize: function(models, options){
        this.bind("add", options.view.addOneWorld);
    }
});

//view
AppView = Backbone.View.extend({
    el: $("body"),
    initialize: function(models, options){
       this.worlds = new Worlds(null, {view: this});
    },
    events: {
        "click #check": "checkIn",
        "click #change": "doChange"
    },
    checkIn: function(){
        var world_name = prompt("");
        //if(world_name == "")
            //world_name = "unknow";
           
         var world = new World();
         var isOk = world.set({name: world_name});
         if(isOk)
            this.worlds.add(world);
         else{
            alert("empty")
         }
    
    },
    doChange: function(){
        var world_name = prompt("");
        var model = this.worlds.models[0];
        var isOk = model.set({name: world_name});
        if(isOk)
         $("#" + model.cid).html("Hello " + model.get('name') );
        else{
            alert("empty")
        }

    },
    addOneWorld: function(model){
        $("#world-list").append("<li id='"+ model.cid +"'>Hello "+model.get('name')+" ! </li>");
    }
    

});

var appview = new AppView();


});
    </script>
    
    <body>
    
    <button id="check">name</button>
    <button id="change">change</button>
<ul id="world-list">
   
</ul>

    
    <a href="http://www.the5fire.net/2-helloworld-backbone.html"> tutorial 1</a>
</body>
</html>