<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <!--common css-->

    <link href="css/reset.css" rel="stylesheet" type="text/css" />
    <link href="css/itriFileBrowser.css" rel="stylesheet" type="text/css" />
    <link href="css/blue/style.css" rel="stylesheet" type="text/css" />
    <link href="css/ui-lightness/jquery-ui-1.8.19.custom.css" rel="stylesheet" type="text/css" />
    <!--common js-->
    <script src="js/jquery-1.7.2.min.js" type="text/javascript"></script>
    <script src="js/jquery.tablesorter.js" type="text/javascript"></script>
    <script src="js/jquery-ui-1.8.19.custom.min.js" type="text/javascript"></script>
   <script src="js/jquery.itriCSSJsonParser.js" type="text/javascript"></script>
   <script src="js/jquery.itriFileBrowser2.js" type="text/javascript"></script>


    
    <script type="text/javascript">

        $(function()
        {
        
        // add parser through the tablesorter addParser method 
            $.tablesorter.addParser({ 
                // set a unique id 
                id: 'mbsorter', 
                is: function(s) { 
                    // return false so this parser is not auto detected 
                    return false; 
                }, 
                format: function(s) { 
                    var num = parseFloat(s);
                    if(isNaN(num))
                        num = 0;
                        
                    return num; 
                }, 
                // set type, either numeric or text 
                type: 'numeric' 
            });
            

        function loadFileData(){
        
            $.itriCSSJsonParser({
                url:'js/response.json',
                type: 'fileBrowser',
                rootId: "fileList2",
                callback: function(elements){
                
                   $("#wrapDiv").append(elements);
                   
                   $("#fileList2").tablesorter({
                        //sortList: [[0,0],[1,0]],
                        headers: { 
                            "1": { 
                                sorter:'mbsorter' 
                            }
                        } 
                    }).itriFileBrowser({
                            onDrop: function(selections, target){
                                      var selStr =" [ "; 
                                      selections.each(function(){
                                        selStr = selStr +$(this).find(".name a").html() + ", ";
                                      })
                                      selStr = selStr + " ] ";
                                      _L("drop" + selStr + " to "+ target.find(".name a").html())
                                       
                                      selections.empty().remove();
                                    }
                    
                    });
                }
            });
            
       } 
       
       //loadFileData();
             
       $('#testBtn').click(function(){
           $("#wrapDiv").empty();
           loadFileData();
        });

        
        
            $("#fileList").tablesorter({
                        //sortList: [[0,0],[1,0]],
                        headers: { 
                            "1": { 
                                sorter:'mbsorter' 
                            }
                        } 
                    }).itriFileBrowser({
                            onDrop: function(selections, target){
                                      var selStr =" [ "; 
                                      selections.each(function(){
                                        selStr = selStr +$(this).find(".name a").html() + ", ";
                                      })
                                      selStr = selStr + " ] ";
                                      _L("drop" + selStr + " to "+ target.find(".name a").html())
                                       
                                      selections.empty().remove();
                                    }
                    
                    });
                    
                    
        });
  
    </script> 

    <style>
    body{width:100%; height:100%; }
    #debugDiv{width:50%; margin: 0 auto; height:100px; border: solid 1px #000; margin-top:10px; }
    #debugDiv div{background: #c0c0c0; margin: 0 auto; border: solid 1px #000; margin-top:3px;}
    </style>
</head>
<body tabindex="0">
<button id="testBtn">refresh</button>

<div id='wrapDiv' class='wrapDiv'>
 <table id="fileList" class="tablesorter fileList"> 
<thead> 
<tr> 
    <th>Name</th> 
    <th>Size</th> 
    <th>LastModified</th> 

</tr> 
</thead> 
<tbody > 
<tr  class='listItem folder'> 
    <td class='nameArea'><img src='imgs/folder2.png'/><div class='name'><a href="#">A</a></div></td>
    <td>--</td> 
    <td>--</td> 
</tr> 
<tr class='listItem folder'> 
     <td class='nameArea'><img src='imgs/folder2.png' /><div class='name'><a href="#">C</a></div></td>
    <td>--</td> 
    <td>--</td> 
</tr> 
<tr  class='listItem folder'> 
     <td class='nameArea'><img src='imgs/folder2.png'/></div><div class='name'><a href="#">z</a></div></td>
    <td>--</td> 
    <td>--</td> 
</tr> 
<tr  class='listItem folder'> 
     <td class='nameArea'><img src='imgs/folder2.png'/><div class='name'><a href="#">b</a></div></td>
    <td>--</td> 
    <td>--</td> 
</tr> 
<tr  class='listItem file'> 
    <td class='nameArea'><img src='imgs/file.png'/><div class='name'>e</div></td>
    <td>330.7 MB</td> 
    <td>Jan. 6, 2012 9:12 AM</td> 

</tr> 
<tr class='listItem file'> 
    <td class='nameArea'><img src='imgs/file.png' /><div class='name'>f</div></td>
    <td>410.7 MB</td> 
    <td>Jan. 6, 2001 6:12 AM</td> 

</tr> 
<tr class='listItem file'> 
    <td class='nameArea'><img src='imgs/file.png' /><div class='name'>g</div></td>
    <td>3510.7 MB</td> 
    <td>Jan. 6, 2011 9:12 AM</td> 

</tr> 
<tr class='listItem file'> 
    <td class='nameArea'><img src='imgs/file.png' /><div class='name'>h</div></td>
    <td>390.7 MB</td> 
    <td>Jan. 16, 2001 9:12 AM</td> 

</tr> 
<tr class='listItem file'> 
    <td class='nameArea'><img src='imgs/file.png' /><div class='name'>i</div></td>
    <td>3410.7 MB</td> 
    <td>Jan. 7, 2001 9:12 AM</td> 

</tr> 
<tr class='listItem file'> 
    <td class='nameArea'><img src='imgs/file.png' /><div class='name'><a>j</a></div></td>
    <td>3780.7 MB</td> 
    <td>Jan. 5, 2001 9:12 AM</td> 

</tr> 
</tbody> 
</table> 


</div>
<div id='debugDiv'>Log:</div>

</body>
</html>
