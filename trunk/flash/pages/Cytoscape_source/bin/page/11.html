<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 <link href="../css/page.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="../js/jquery-1.3.2.min.js"></script>
<script type="text/javascript" src="../js/AC_OETags.min.js"></script>
<script type="text/javascript" src="../js/json2.min.js"></script>
<script type="text/javascript" src="../js/cytoscapeweb.js"></script>

<script type="text/javascript" src="../js/itriTopology_new.js"></script>
<script type="text/javascript" src="../js/testData.js"></script>

<script type="text/javascript" src="../js/debug.js"></script>


<script type="text/javascript">
 
 $(function(){
 
 	var options = {
			swfPath : "../swf/CytoscapeWeb",
			flashInstallerPath : "../swf/playerProductInstall",
			flashAlternateContent : "Le Flash Player est nécessaire."
		};
		
 	//var vis = new org.cytoscapeweb.Visualization("cytoscapeweb", options);
	var $vis =$.itriTopology("cytoscapeweb", options);

	var time1;
	$vis.ready(function(){
		printTime("time cost :"+ (new Date - time1) +"ms");
	
	});
	$vis.drawStart(function(){;
		timeclear();
	    time1 = new Date; 
	})

	$vis.addListener("click", "nodes", function(event){
	
	 if(event == null)
		return;
	 var target = event.target; 
	 alert(target.data.id )
	});
	
	
	 $("#test0").click(function(){
	 
	 	var visual_style = {
							global : {
								backgroundColor : "#FFFFFF"
							},
							nodes : {},
							edges: {}
							};
							
						var layout = {
							name : "Tree",
							options:{orientation : "leftToRight"}
						};
						
						var json = {
						dataSchema: 
									{
							  nodes: [
										{ name: "label", type: "string" },
										{ name: "type", type: "string" },
										{id: "type", name: "type", type: "string" }
									 ]},     
							data : {
								nodes : [ 
								{id : "1"}, {id : "2"} , {id : "3"}
								],
								edges : [
								{id : "2to1",target : "1",source : "2"} 
								]
							}
						};
						
					 
						var drawOptions = {
							network : json,
							edgeLabelsVisible : true,
							visualStyle : visual_style,
							layout : layout
						};
						$vis.draw(drawOptions);
	 });
	 
	 
	 $("#test").click(function(){
					//-------------------------
					/*
						var visual_style = {
							global : {
								backgroundColor : "#FFFFFF"
							},
							nodes : {},
							edges: {}
							};
							
						var layout = {
							name : "Tree",
							options:{orientation : "leftToRight"}
						};
						
						var json = {
						dataSchema: 
									{
							  nodes: [
										{ name: "label", type: "string" },
										{ name: "type", type: "string" },
										{id: "type", name: "type", type: "string" }
									 ]},     
							data : {
								nodes : [ 
								{id : "1"}, {id : "2"} , {id : "3"}
								],
								edges : [
								{id : "2to1",target : "1",source : "2"} 
								]
							}
						};
						
					 
						var drawOptions = {
							network : json,
							edgeLabelsVisible : true,
							visualStyle : visual_style,
							layout : layout
						};
						$vis.draw(drawOptions);
					 */
					  
					 
				 //------------------------------

				 
				/*
				$vis.drawData({
						nodes : [ 
									{id : "1"}, {id : "2", type:"aa"} 
								],
						edges : [
									{id : "2to1",target : "1",source : "2"} 
								]
						});
*/
			
			
			/*
				$vis.updateOptions({
					drawOptions:{
							network:{
							dataSchema:{ 
									nodes: [
												{ name: "label", type: "string" },
												{ name: "type", type: "string" },
												{id: "type", name: "type", type: "string" }
										   ]
									}
						},
						layout:{
							name:"Group",
							option: {
								groupNodes :
								[
										{ x:200, y:0, data: { containGroup: "compute", type:"group", posAlgorithm: "vlinear"} }, //linear, circle, spiral, vlinear
										{ x:100, y:0, data: { containGroup: "network", type:"group", posAlgorithm: "vlinear"} },
										{ x:0, y:-30, data: { containGroup: "storage", type:"group", posAlgorithm: "vlinear"} }	
								],
								groupBy:"type", 
								drawGroupNodes:true
								}
						}
					}
					
				});
				*/
				

				$vis.updateOptions(options);
				
				$vis.drawData({
						nodes : [ 
									{id : "3"}, {id : "4"} 
								],
						edges : [
									{id : "111",target : "3",source : "4"} 
								]
						});
						
						
								
			});
			
			
			
		$("#test2").click(function(){
		
				$vis.updateOptions({
						drawOptions:{
							layout:{
								name: "Group", 
								options:{
									groupNodes :
									[
											{ x:200, y:0, data: { containGroup: "compute", type:"group", posAlgorithm: "vlinear"} }, //linear, circle, spiral, vlinear
											{ x:100, y:0, data: { containGroup: "network", type:"group", posAlgorithm: "vlinear"} },
											{ x:0, y:-30, data: { containGroup: "storage", type:"group", posAlgorithm: "vlinear"} }	
									],
									groupBy:"type", 
									drawGroupNodes:true
									}
							},
							network:{
								dataSchema:{ 
										nodes: [
											{ name: "type", type: "string" }
										]
									}
								}
							}
				});
				
				$vis.drawData({
						nodes : [ 
									{id : "1" , type:"compute"}, {id : "2", type:"compute"} 
								],
						edges : [
									{id : "2to1",target : "1",source : "2"} 
								]
						});
				
				
		});	
			
		
		$("#test3").click(function(){
		
		$vis.updateOptions(options);
				
				$vis.drawData({
						nodes : [ 
								
								],
						edges : [
									
								]
						});
						
		});		
		

		$("#drawbtn2").click(function(){
	 
		var groupOption = {
				groupNodes :
				[
						{ x:200, y:0, data: { containGroup: "compute", type:"group", posAlgorithm: "vlinear"} }, //linear, circle, spiral, vlinear
						{ x:100, y:0, data: { containGroup: "network", type:"group", posAlgorithm: "vlinear"} },
						{ x:0, y:-30, data: { containGroup: "storage", type:"group", posAlgorithm: "vlinear"} }	
				],
				groupBy:"type", 
				drawGroupNodes:false
				};
				
				
					$vis.updateOptions({
						drawOptions:{
						   layout:{name:"Group", options:groupOption}
						
						}
					});
				
				
				$vis.drawData(data);
		
				//--debug
				printData(JSON.stringify(data));	
		});
	
	
		
		 $("#realdataForceDirected").click(function(){
			$.getJSON("topologyJson.js", function(json){  
				var drawJson = {nodes:json.nodes, edges:json.links};
				
				$vis.updateOptions({
						drawOptions:{
						   layout:{name:"ForceDirected", options:{seed:2}}
						  /* ,
						   network:{
						   dataSchema: 
								{
								nodes: [
											{ name: "deviceType", type: "string" },
											{ name: "weight", type: "Number" },
											{ name: "label", type: "string" }
										]
								}
						   }*/
						}
				});

				$vis.addSchema( {
								nodes: [
											{ name: "deviceType", type: "string" },
											{ name: "weight", type: "Number" },
											{ name: "label", type: "string" }
										]
							   });
								
				$vis.drawData(drawJson);
            })   
		});

 });
 

</script>
<style></style>


</head>
<body>
	<div id="cytoscapeweb"></div>
	<button id='test0'>btn0</button>
	<button id='test'>btn</button>
		<button id='test2'>btn2</button>
	<button id='test3'>btn3</button>	
	 <br>
	 simple data:<button id='drawbtn1'>group</button>
	 <button id='drawTree1'>Tree</button>
	 <button id='drawCircle1'>Circle</button>
	 <button id='drawRadial'>Radial</button>
	 <button id='drawPreset'>Preset</button>
	 <button id='drawCompoundSpringEmbedder'>CompoundSpringEmbedder</button>
	 <button id='drawForceDirected'>ForceDirected </button>
	 
	<br>
	 test data:<button id='drawbtn2'>group 1</button>
			<button id='drawbtn3'>group 2</button>
			
	<button id='drawbtn4'>forcedirected</button>
<br>


real data:<button id='realdata0'>group</button>
<button id='realdataForceDirected'>forcedirected</button>
<button id='realdataTree'>Tree</button>
<br>
<br>
	<button id='addbtn'>add</button>
	
		
		<button id='addNet'>addNet</button>
			<button id='debugger'>debugger</button>
			
			
				<button id='clearAll'>clearAll</button>
					<button id='reDraw'>reDraw</button>
					
						<button id="deleteNode">deleteNode</button>
			
			<div id='timeDiv'></div>
			<div id='debugDiv'></div>

			<input id='dataArea' />
			<button id='drawData'>drawData</button>
			<button id='addData'>addData</button>
	<!--web link-->
	<br />
	<br />
	<br />
	<a href='aaaaa' class='ui-state-default ui-corner-all'
		target='http://cytoscapeweb.cytoscape.org/'>reference</a>


</body>
</html>
