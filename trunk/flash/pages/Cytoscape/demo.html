<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<!--common js-->


<script type="text/javascript" src="../../../js/jquery-1.3.2.min.js"></script>


<script type="text/javascript" src="js/AC_OETags.min.js"></script>
<script type="text/javascript" src="js/json2.min.js"></script>
<script type="text/javascript" src="js/cytoscapeweb.min.js"></script>




<script type="text/javascript">
	$(function() {

		var options = {
			swfPath : "swf/CytoscapeWeb",
			flashInstallerPath : "swf/playerProductInstall",
			flashAlternateContent : "Le Flash Player est n√©cessaire."
		};

		/*
		var xml = '\
		<graphml>\
		  <graph>\
		    <node id="1"/>\
		    <node id="2"/>\
		    <node id="3"/>\
		    <edge target="1" source="2"/>\
		  </graph>\
		</graphml>\
		';
		 */

		var networ_json = {
			data : {
				nodes : [ {
					id : "1"
					
				}, {
					id : "2"
				} ],
				edges : [ {
					id : "2to1",
					target : "1",
					source : "2"
				} ]
			}
		};

		 
		  var network_json2 = {
                  // NOTE the parent attribute
                  data: {                            
                	  nodes: [ { id: "1" },
                               { id: "2", parent: "1" },
                               { id: "3", parent: "1" },
                               { id: "4", parent: "2" },
                               { id: "5", parent: "6" },
                               { id: "6" },
                               { id: "7" },
                               { id: "8", parent: "1" }
                      ],                            
                      edges: [ 
                              { target: "3", source: "5" },
                              { target: "3", source: "8" },
                              { target: "2", source: "7" }
                      ]                        
		 		 }             
		  };

		  
		 var xml = '\                <graphml>\
             <key id="label" for="all" attr.name="label" attr.type="string"/>\
             <key id="weight" for="node" attr.name="weight" attr.type="double"/>\
             <graph edgedefault="directed">\
               <node id="1">\
                   <data key="label">A</data>\
                   <data key="weight">2.0</data>\
               </node>\                    <node id="2">\
                   <data key="label">B</data>\
                   <data key="weight">1.5</data>\
               </node>\                    <node id="3">\
                   <data key="label">C</data>\
                   <data key="weight">1.0</data>\
               </node>\
               <edge source="1" target="2">\
                   <data key="label">A to B</data>\
               </edge>\
               <edge source="1" target="3">\
                   <data key="label">A to C</data>\
               </edge>\                  </graph>\
           </graphml>\                ';                
           
           
		var visual_style = {
			global : {
				backgroundColor : "#ABCFD6"
			},
			nodes: {                        
				shape: "ELLIPSE",
				borderWidth: 3,
				image: "images/2.jpg",
				width:50,
				height:50,
                borderColor: "#000000",                        
                size: {
                      defaultValue: 25,
                      continuousMapper: { attrName: "weight", minValue: 25, maxValue: 75 }
                }
			  
			  	
			},
			color: {
                discreteMapper: {
                    attrName: "id",
                    entries: [
                        { attrValue: 1, value: "#0B94B1" },
                        { attrValue: 2, value: "#9A0B0B" },
                        { attrValue: 3, value: "#dddd00" }] 
						}
            },
			labelHorizontalAnchor: "center",
			edges: {                        
				width: 3,
                color: "#0B94B1"                   
                }  
		};
		// init and draw
		var vis = new org.cytoscapeweb.Visualization("cytoscapeweb", options);
		vis.draw({
			network : network_json2,
			edgeLabelsVisible: true, 
			layout : "CompoundSpringEmbedder",
			visualStyle : visual_style,
		//panZoomControlVisible: false 
		});

		var debugDiv = $("#debugDiv");

		function print(str) {
			debugDiv.append("<p>" + str + "</p>");
		}
		function clear() {
			debugDiv.empty();
		}

		// callback when Cytoscape Web has finished drawing
		vis.ready(function() {
			// add a listener for when nodes and edges are clicked
			vis.addListener("click", "nodes", function(event) {
				handle_click(event);
			})

			vis.addListener("click", "edges", function(event) {
				handle_click(event);
			});

			function handle_click(event) {

				var target = event.target;
				clear();

				print("event.group = " + event.group);
				for ( var i in target.data) {
					var variable_name = i;
					var variable_value = target.data[i];
					print("event.target.data." + variable_name + " = "
							+ variable_value);
				}
			}

		}); // draw options

	});
</script>
<style>
/* The Cytoscape Web container must have its dimensions set. */
html,body {
	height: 100%;
	width: 100%;
	padding: 0;
	margin: 0;
}

//
#cytoscapeweb {
	width: 100%;
	height: 100%;
}

#cytoscapeweb {
	width: 500px;
	height: 500px;
	border: solid 1px black;
}
</style>


</head>
<body>
	<div id="cytoscapeweb"></div>

	<div id='debugDiv'></div>

	<!--web link-->
	<br />
	<br />
	<br />
	<a href='aaaaa' class='ui-state-default ui-corner-all' target='http://cytoscapeweb.cytoscape.org/'>reference</a>


</body>
</html>
